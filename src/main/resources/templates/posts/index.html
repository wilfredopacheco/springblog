<!doctype html>

<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<head th:replace="head :: head">
    <meta charset="UTF-8"/>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Document</title>
</head>
<body class="container navy">
<!--<div class="card col-8">-->
<nav th:replace="nav :: nav"/>
<div class="display-4 mb-4 pt-4">All Posts:</div>
<div class="row">
    <div class="card border mb-3 col-4 p-4 float-left" th:each="post : ${posts}">
        <div class="card phm bg-transparent navy border mb-3 p-4">
            <div>
                <h3 class="" th:text="${post.title}"></h3>
            </div>
            <div>
                <p class="" th:text="${post.body}"></p>
            </div>
            <div>
                Posted By: <p th:text="${post.getUser().getUsername()}"></p>
            </div>
            <div><img th:src="${post.getUser().getPicture_large()}" class="border rounded-circle float-right" alt="profile picture"/></div>

            <div class="card-footer bg-transparent border-0 row border-olive d-flex inline-flex d-xs-inline mb-1">
                <div class="mr-1 mb-1">
                    <form th:action="@{/posts/{id}(id=${post.id})}" method="get" th:object="${post.id}">
                        <!--<input type="hidden" th:value="${post.id}"/>-->
                        <button type="submit" class="btn btn-outline-primary btn-sm">View</button>
                    </form>
                </div>
                <div sec:authorize="isAuthenticated()" class="mr-1 mb-1">
                    <form th:action="@{/posts/{id}/update(id=${post.id})}" method="get" th:object="${post.id}">
                        <!--<input type="hidden" th:value="${post.id}"/>-->
                        <button type="submit" class="btn btn-outline-primary btn-sm">Edit</button>
                    </form>
                </div>
                <div sec:authorize="isAuthenticated()" class="mr-1 mb-1">
                    <form th:action="@{/posts/{id}/update/delete(id=${post.id})}" method="get" th:object="${post.id}">
                        <!--<input type="hidden" th:value="${post.id}"/>-->
                        <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="footer :: footer"/>
</body>
</html>